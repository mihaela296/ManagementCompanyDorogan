<Page x:Class="ManagementCompanyDorogan.DebtsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Задолженности" 
      Background="White"
      FontFamily="Segoe UI"
      Loaded="Page_Loaded">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <Border Grid.Row="0" Background="#67BA80" Padding="15">
            <TextBlock Text="Задолженности по коммунальным услугам" 
                       FontSize="22" FontWeight="Bold" Foreground="White"
                       HorizontalAlignment="Center"/>
        </Border>

        <!-- Таблица -->
        <DataGrid x:Name="dgDebts" Grid.Row="1" Margin="10"
                  AutoGenerateColumns="True" IsReadOnly="True"
                  SelectionMode="Single" AlternatingRowBackground="#F9F9F9"/>

        <!-- Панель управления -->
        <Border Grid.Row="2" Background="#F8F9FA" Padding="10">
            <StackPanel>
                <!-- Статистика -->
                <WrapPanel HorizontalAlignment="Center" Margin="0,0,0,10">
                    <TextBlock x:Name="txtTotalWater" Text="Вода: 0 ₽" 
                               Margin="10,0" FontWeight="SemiBold" FontSize="14"/>
                    <TextBlock x:Name="txtTotalElectricity" Text="Электричество: 0 ₽" 
                               Margin="10,0" FontWeight="SemiBold" FontSize="14"/>
                    <TextBlock x:Name="txtTotalDebt" Text="Всего: 0 ₽" 
                               Margin="10,0" FontWeight="Bold" FontSize="14" Foreground="Red"/>
                    <TextBlock x:Name="txtDebtCount" Text=" (0 записей)" 
                               Margin="10,0" FontSize="14"/>
                </WrapPanel>

                <!-- Кнопки -->
                <WrapPanel HorizontalAlignment="Center">
                    <Button Content="Обновить" 
                            Width="120" Height="35" FontSize="13" FontWeight="SemiBold"
                            Background="#67BA80" Foreground="White" BorderThickness="0"
                            Click="btnRefresh_Click" Margin="5" Cursor="Hand"
                            Padding="10,5">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border" Background="{TemplateBinding Background}">
                                    <ContentPresenter HorizontalAlignment="Center" 
                                                    VerticalAlignment="Center" 
                                                    Margin="{TemplateBinding Padding}"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#5AA66F"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button Content="Крупные долги" 
                            Width="120" Height="35" FontSize="13" FontWeight="SemiBold"
                            Background="#FFCCCC" Foreground="#721C24" BorderThickness="0"
                            Click="btnLargeDebts_Click" Margin="5" Cursor="Hand"
                            Padding="10,5">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border" Background="{TemplateBinding Background}">
                                    <ContentPresenter HorizontalAlignment="Center" 
                                                    VerticalAlignment="Center" 
                                                    Margin="{TemplateBinding Padding}"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#F5B7B1"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button Content="Экспорт" 
                            Width="120" Height="35" FontSize="13" FontWeight="SemiBold"
                            Background="#6C757D" Foreground="White" BorderThickness="0"
                            Click="btnExport_Click" Margin="5" Cursor="Hand"
                            Padding="10,5">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border" Background="{TemplateBinding Background}">
                                    <ContentPresenter HorizontalAlignment="Center" 
                                                    VerticalAlignment="Center" 
                                                    Margin="{TemplateBinding Padding}"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#5A6268"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </WrapPanel>
            </StackPanel>
        </Border>
    </Grid>
</Page>